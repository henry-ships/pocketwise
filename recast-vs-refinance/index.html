<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mortgage Recast vs Refinance Calculator | Should I Recast My Mortgage?</title>
  <meta name="description" content="Free mortgage recast vs refinance calculator. Compare lump sum recast savings against refinancing costs. Find out which option saves you more money.">
  <meta name="keywords" content="mortgage recast vs refinance, should I recast my mortgage, mortgage recast calculator, lump sum mortgage recast, recast or refinance which is better">
  <link rel="canonical" href="https://lendwise.tools/recast-vs-refinance/">
  <link rel="stylesheet" href="/css/style.css">
  
  <!-- Open Graph -->
  <meta property="og:title" content="Mortgage Recast vs Refinance Calculator | PocketWise">
  <meta property="og:description" content="Compare mortgage recast and refinance options. See which saves more based on your lump sum, current rate, and today's refinance rates.">
  <meta property="og:type" content="website">
  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "What is the difference between a mortgage recast and refinance?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "A mortgage recast is when you make a large lump-sum payment toward your principal and your lender recalculates your monthly payment based on the new, lower balance while keeping your same interest rate and term. A refinance replaces your entire mortgage with a new loan, potentially at a different rate and term, but involves closing costs typically ranging from 2-5% of the loan amount."
        }
      },
      {
        "@type": "Question",
        "name": "Should I recast my mortgage or refinance?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Recast if: you have a lump sum, your current rate is lower than or similar to today's rates, and you want lower payments with minimal fees ($150-500). Refinance if: today's rates are significantly lower than your current rate (typically 0.75%+ difference), you want to change your loan term, or you need to access equity. The right choice depends on comparing total costs and savings over your remaining term."
        }
      },
      {
        "@type": "Question",
        "name": "How much does a mortgage recast cost?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "A mortgage recast typically costs between $150 and $500 as a one-time administrative fee charged by your lender. This is significantly less than refinancing closing costs, which typically range from $3,000 to $15,000 (2-5% of the loan amount). Most lenders require a minimum lump sum payment of $5,000-$10,000 to qualify for a recast."
        }
      },
      {
        "@type": "Question",
        "name": "What is the minimum amount to recast a mortgage?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Most lenders require a minimum lump sum payment of $5,000 to $10,000 to process a mortgage recast. Some lenders may require $10,000 or more. Check with your specific lender as requirements vary. Note that not all loan types are eligible for recasting‚ÄîFHA and VA loans typically cannot be recast."
        }
      },
      {
        "@type": "Question",
        "name": "When is refinancing better than recasting?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Refinancing is typically better when: 1) Current rates are at least 0.75-1% lower than your existing rate, 2) You plan to stay in your home long enough to recoup closing costs (usually 2-5 years), 3) You want to shorten your loan term (e.g., 30-year to 15-year), or 4) You need to access home equity through a cash-out refinance. Use a break-even calculator to compare total costs."
        }
      },
      {
        "@type": "Question",
        "name": "Can I recast after refinancing?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes, you can typically recast a mortgage after refinancing, as long as your new loan is a conventional loan that allows recasting. However, most lenders require you to wait a certain period (often 3-6 months) after closing before you can recast. FHA and VA loans generally cannot be recast regardless of when you refinanced."
        }
      }
    ]
  }
  </script>
</head>
<body>
  <!-- Navigation -->
  <nav class="lw-nav">
    <div class="lw-nav-inner">
      <a href="/" class="lw-logo">
        <span class="lw-logo-icon">P</span>
        PocketWise
      </a>
      <ul class="lw-nav-links">
        <li><a href="/">All Tools</a></li>
        <li><a href="/recast-vs-refinance/" class="active">Recast vs Refinance</a></li>
      </ul>
      <button class="lw-hamburger" onclick="toggleMobileMenu()" aria-label="Menu">‚ò∞</button>
    </div>
    <div class="lw-mobile-menu" id="mobileMenu">
      <a href="/">All Tools</a>
      <a href="/recast-vs-refinance/">Recast vs Refinance</a>
    </div>
  </nav>

  <main class="lw-main wide">
    <!-- Hero -->
    <section class="lw-hero">
      <span class="lw-badge">MORTGAGE TOOL</span>
      <h1>Mortgage <span class="accent">Recast vs Refinance</span></h1>
      <p class="subtitle">Have a lump sum? Compare recasting your mortgage against refinancing to see which option saves you more money.</p>
    </section>

    <!-- Calculator Inputs -->
    <div class="lw-card">
      <div class="lw-card-header">
        <div class="lw-card-icon blue">üè†</div>
        <div>
          <div class="lw-card-title">Current Mortgage Details</div>
          <div class="lw-card-subtitle">Enter your existing loan information</div>
        </div>
      </div>

      <div class="lw-grid-2">
        <div class="lw-form-group">
          <label class="lw-label">Current Loan Balance</label>
          <div class="lw-input-prefix">
            <span class="prefix">$</span>
            <input type="text" class="lw-input" id="currentBalance" placeholder="300,000" inputmode="numeric">
          </div>
        </div>

        <div class="lw-form-group">
          <label class="lw-label">Current Interest Rate</label>
          <div class="lw-input-suffix">
            <input type="text" class="lw-input" id="currentRate" placeholder="6.5" inputmode="decimal">
            <span class="suffix">%</span>
          </div>
        </div>
      </div>

      <div class="lw-grid-2">
        <div class="lw-form-group">
          <label class="lw-label">Current Monthly Payment <span class="lw-label-hint">(P&I only)</span></label>
          <div class="lw-input-prefix">
            <span class="prefix">$</span>
            <input type="text" class="lw-input" id="currentPayment" placeholder="1,896" inputmode="numeric">
          </div>
        </div>

        <div class="lw-form-group">
          <label class="lw-label">Remaining Term</label>
          <div class="lw-input-suffix">
            <input type="text" class="lw-input" id="remainingTerm" placeholder="300" inputmode="numeric">
            <span class="suffix">months</span>
          </div>
        </div>
      </div>
    </div>

    <div class="lw-card">
      <div class="lw-card-header">
        <div class="lw-card-icon green">üí∞</div>
        <div>
          <div class="lw-card-title">Lump Sum & Options</div>
          <div class="lw-card-subtitle">Compare recast vs refinance costs</div>
        </div>
      </div>

      <div class="lw-form-group">
        <label class="lw-label">Lump Sum Amount Available</label>
        <div class="lw-input-prefix">
          <span class="prefix">$</span>
          <input type="text" class="lw-input" id="lumpSum" placeholder="50,000" inputmode="numeric">
        </div>
      </div>

      <div class="lw-grid-2">
        <div class="lw-form-group">
          <label class="lw-label">Recast Fee <span class="lw-label-hint">(typically $150-500)</span></label>
          <div class="lw-input-prefix">
            <span class="prefix">$</span>
            <input type="text" class="lw-input" id="recastFee" placeholder="250" value="250" inputmode="numeric">
          </div>
        </div>

        <div class="lw-form-group">
          <label class="lw-label">Refinance Closing Costs</label>
          <div class="lw-input-prefix">
            <span class="prefix">$</span>
            <input type="text" class="lw-input" id="refiClosingCosts" placeholder="8,000" inputmode="numeric">
          </div>
        </div>
      </div>

      <div class="lw-form-group">
        <label class="lw-label">New Refinance Rate <span class="lw-label-hint">(today's available rate)</span></label>
        <div class="lw-input-suffix">
          <input type="text" class="lw-input" id="newRefiRate" placeholder="5.5" inputmode="decimal">
          <span class="suffix">%</span>
        </div>
      </div>
    </div>

    <!-- Results Section -->
    <div id="resultsSection" class="lw-hidden">
      <!-- Decision Hero -->
      <div class="lw-result-hero" id="decisionHero">
        <div class="lw-result-label">RECOMMENDATION</div>
        <div class="lw-result-number" id="recommendation" style="font-size: 36px; letter-spacing: -1px;">Calculating...</div>
        <div class="lw-result-sub" id="recommendationSub"></div>
      </div>

      <!-- Side-by-Side Comparison Cards -->
      <div class="comparison-grid">
        <!-- Recast Card -->
        <div class="comparison-card recast" id="recastCard">
          <div class="comparison-header">
            <span class="comparison-icon">üîÑ</span>
            <h3>Mortgage Recast</h3>
            <span class="comparison-tag">Keep Your Rate</span>
          </div>
          
          <div class="comparison-main-value">
            <div class="comparison-label">New Monthly Payment</div>
            <div class="comparison-amount" id="recastPayment">$0</div>
            <div class="comparison-savings" id="recastMonthlySavings">Saves $0/month</div>
          </div>

          <div class="comparison-details">
            <div class="comparison-row">
              <span>Upfront Cost</span>
              <span class="comparison-value" id="recastUpfront">$250</span>
            </div>
            <div class="comparison-row">
              <span>Interest Rate</span>
              <span class="comparison-value" id="recastRate">--</span>
            </div>
            <div class="comparison-row">
              <span>New Balance</span>
              <span class="comparison-value" id="recastBalance">$0</span>
            </div>
            <div class="comparison-row">
              <span>Total Interest Remaining</span>
              <span class="comparison-value" id="recastTotalInterest">$0</span>
            </div>
            <div class="comparison-row highlight">
              <span>Total Cost Over Term</span>
              <span class="comparison-value" id="recastTotalCost">$0</span>
            </div>
          </div>
        </div>

        <!-- Refinance Card -->
        <div class="comparison-card refinance" id="refinanceCard">
          <div class="comparison-header">
            <span class="comparison-icon">‚ú®</span>
            <h3>Refinance</h3>
            <span class="comparison-tag">New Rate</span>
          </div>
          
          <div class="comparison-main-value">
            <div class="comparison-label">New Monthly Payment</div>
            <div class="comparison-amount" id="refiPayment">$0</div>
            <div class="comparison-savings" id="refiMonthlySavings">Saves $0/month</div>
          </div>

          <div class="comparison-details">
            <div class="comparison-row">
              <span>Upfront Cost</span>
              <span class="comparison-value" id="refiUpfront">$8,000</span>
            </div>
            <div class="comparison-row">
              <span>Interest Rate</span>
              <span class="comparison-value" id="refiRate">--</span>
            </div>
            <div class="comparison-row">
              <span>New Balance</span>
              <span class="comparison-value" id="refiBalance">$0</span>
            </div>
            <div class="comparison-row">
              <span>Total Interest Remaining</span>
              <span class="comparison-value" id="refiTotalInterest">$0</span>
            </div>
            <div class="comparison-row highlight">
              <span>Total Cost Over Term</span>
              <span class="comparison-value" id="refiTotalCost">$0</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Savings Comparison Bar -->
      <div class="lw-card">
        <div class="lw-card-header">
          <div class="lw-card-icon violet">üìä</div>
          <div>
            <div class="lw-card-title">Total Cost Comparison</div>
            <div class="lw-card-subtitle">Over remaining loan term</div>
          </div>
        </div>

        <div class="lw-bar-chart">
          <div class="lw-bar-row">
            <div class="lw-bar-label">Keep Current</div>
            <div class="lw-bar-track">
              <div class="lw-bar-fill amber" id="currentBar" style="width: 0%">
                <span class="lw-bar-amount" id="currentCostAmount">$0</span>
              </div>
            </div>
          </div>
          <div class="lw-bar-row">
            <div class="lw-bar-label">Recast</div>
            <div class="lw-bar-track">
              <div class="lw-bar-fill green" id="recastBar" style="width: 0%">
                <span class="lw-bar-amount" id="recastCostAmount">$0</span>
              </div>
            </div>
          </div>
          <div class="lw-bar-row">
            <div class="lw-bar-label">Refinance</div>
            <div class="lw-bar-track">
              <div class="lw-bar-fill blue" id="refiBar" style="width: 0%">
                <span class="lw-bar-amount" id="refiCostAmount">$0</span>
              </div>
            </div>
          </div>
        </div>

        <div class="savings-summary" id="savingsSummary">
          <!-- Filled by JS -->
        </div>
      </div>

      <!-- Break-Even Analysis -->
      <div class="lw-card">
        <div class="lw-card-header">
          <div class="lw-card-icon amber">‚è±Ô∏è</div>
          <div>
            <div class="lw-card-title">Break-Even Analysis</div>
            <div class="lw-card-subtitle">How long until each option pays off</div>
          </div>
        </div>

        <div class="breakeven-grid">
          <div class="breakeven-item">
            <div class="breakeven-label">Recast Break-Even</div>
            <div class="breakeven-value" id="recastBreakeven">--</div>
            <div class="breakeven-note" id="recastBreakevenNote">months to recoup fee</div>
          </div>
          <div class="breakeven-item">
            <div class="breakeven-label">Refinance Break-Even</div>
            <div class="breakeven-value" id="refiBreakeven">--</div>
            <div class="breakeven-note" id="refiBreakevenNote">months to recoup costs</div>
          </div>
        </div>

        <div class="breakeven-insight" id="breakevenInsight">
          <!-- Filled by JS -->
        </div>
      </div>

      <!-- What This Means -->
      <div class="lw-card">
        <div class="lw-card-header">
          <div class="lw-card-icon blue">üí°</div>
          <div>
            <div class="lw-card-title">What This Means</div>
            <div class="lw-card-subtitle">Plain English breakdown</div>
          </div>
        </div>
        <div id="explanationText" style="color: var(--lw-text-secondary); line-height: 1.8;">
          <!-- Explanation will be rendered here -->
        </div>
      </div>

      <!-- Pros & Cons -->
      <div class="lw-card">
        <div class="lw-card-header">
          <div class="lw-card-icon green">‚öñÔ∏è</div>
          <div>
            <div class="lw-card-title">Pros & Cons</div>
            <div class="lw-card-subtitle">Quick comparison of both options</div>
          </div>
        </div>

        <div class="pros-cons-grid">
          <div class="pros-cons-card">
            <h4>üîÑ Recast</h4>
            <div class="pros">
              <div class="pros-header">‚úÖ Pros</div>
              <ul>
                <li>Very low fee ($150-500)</li>
                <li>Keep your existing rate</li>
                <li>No credit check required</li>
                <li>No appraisal needed</li>
                <li>Quick process (1-2 weeks)</li>
                <li>No closing paperwork</li>
              </ul>
            </div>
            <div class="cons">
              <div class="cons-header">‚ùå Cons</div>
              <ul>
                <li>Requires large lump sum</li>
                <li>Doesn't lower interest rate</li>
                <li>Not all loans qualify</li>
                <li>FHA/VA loans excluded</li>
                <li>Term stays the same</li>
              </ul>
            </div>
          </div>

          <div class="pros-cons-card">
            <h4>‚ú® Refinance</h4>
            <div class="pros">
              <div class="pros-header">‚úÖ Pros</div>
              <ul>
                <li>Can lower interest rate</li>
                <li>Can change loan term</li>
                <li>Access equity (cash-out)</li>
                <li>Works with any loan type</li>
                <li>Consolidate second mortgages</li>
                <li>Remove PMI potentially</li>
              </ul>
            </div>
            <div class="cons">
              <div class="cons-header">‚ùå Cons</div>
              <ul>
                <li>High closing costs (2-5%)</li>
                <li>Requires credit check</li>
                <li>Appraisal required</li>
                <li>4-6 weeks to close</li>
                <li>More paperwork</li>
                <li>May restart 30-yr term</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- SEO Content -->
    <section class="lw-content">
      <h2>Mortgage Recast vs Refinance: Which Is Right for You?</h2>
      <p>If you have a lump sum of cash and want to lower your monthly mortgage payment, you have two main options: <strong>recasting</strong> your mortgage or <strong>refinancing</strong>. Each has distinct advantages depending on your current rate, how much cash you have available, and today's interest rate environment.</p>

      <h3>What Is a Mortgage Recast?</h3>
      <p>A <strong>mortgage recast</strong> (also called re-amortization) is when you make a large lump-sum payment toward your principal balance, and your lender recalculates your monthly payment based on the new, lower balance. Critically, your <em>interest rate and loan term stay the same</em>‚Äîonly your payment drops.</p>
      <p>Recasts typically cost just $150-500 as an administrative fee, making them far cheaper than refinancing. They're ideal when rates are high (or rising) and you want to keep your existing lower rate.</p>

      <h3>What Is a Mortgage Refinance?</h3>
      <p>A <strong>refinance</strong> replaces your entire mortgage with a brand new loan. This means you can get a different interest rate, change your loan term (e.g., from 30 years to 15 years), or access your home's equity through a cash-out refinance.</p>
      <p>The downside? Refinancing involves full closing costs, typically 2-5% of your loan amount. On a $300,000 mortgage, that's $6,000-$15,000 in fees. You'll also need to qualify again with credit checks, income verification, and usually an appraisal.</p>

      <h2>When Should You Recast Instead of Refinance?</h2>
      <p><strong>Recast is usually better when:</strong></p>
      <ul>
        <li><strong>Your current rate is competitive</strong> ‚Äî If your rate is lower than (or similar to) today's rates, a recast lets you keep it</li>
        <li><strong>You have a lump sum ready</strong> ‚Äî From a bonus, inheritance, home sale, or savings</li>
        <li><strong>You want minimal hassle</strong> ‚Äî No credit check, no appraisal, no mountains of paperwork</li>
        <li><strong>You just bought recently</strong> ‚Äî If you financed a home purchase and got an inheritance or bonus shortly after</li>
        <li><strong>You want certainty</strong> ‚Äî Closing costs for refinancing can vary; recast fees are fixed and low</li>
      </ul>

      <h2>When Should You Refinance Instead of Recast?</h2>
      <p><strong>Refinancing is usually better when:</strong></p>
      <ul>
        <li><strong>Rates have dropped significantly</strong> ‚Äî At least 0.75-1% lower than your current rate</li>
        <li><strong>You want to change your term</strong> ‚Äî Shorten to 15 years for faster payoff, or extend to 30 for lower payments</li>
        <li><strong>You need to access equity</strong> ‚Äî Cash-out refinance for renovations, debt consolidation, etc.</li>
        <li><strong>Your loan type doesn't allow recasting</strong> ‚Äî FHA and VA loans typically cannot be recast</li>
        <li><strong>You plan to stay long-term</strong> ‚Äî Long enough to recoup closing costs (use our break-even calculation)</li>
      </ul>

      <h2>How to Use This Calculator</h2>
      <p>Enter your current loan details (balance, rate, payment, remaining term), your available lump sum, and the refinance terms you've been quoted. The calculator will show:</p>
      <ul>
        <li><strong>New payment after recast</strong> ‚Äî Based on your current rate with reduced balance</li>
        <li><strong>New payment after refinance</strong> ‚Äî Based on new rate with same term</li>
        <li><strong>Total cost comparison</strong> ‚Äî Including all interest and fees over the remaining term</li>
        <li><strong>Break-even timeline</strong> ‚Äî How long until each option's savings exceed its costs</li>
        <li><strong>Decision guidance</strong> ‚Äî Clear recommendation based on your numbers</li>
      </ul>

      <!-- FAQ Section -->
      <div class="lw-faq">
        <h2>Frequently Asked Questions</h2>
        
        <div class="lw-faq-item">
          <button class="lw-faq-q">What is the difference between a mortgage recast and refinance?</button>
          <div class="lw-faq-a">
            <p>A mortgage recast is when you make a large lump-sum payment toward your principal and your lender recalculates your monthly payment based on the new, lower balance while keeping your same interest rate and term. A refinance replaces your entire mortgage with a new loan, potentially at a different rate and term, but involves closing costs typically ranging from 2-5% of the loan amount.</p>
          </div>
        </div>

        <div class="lw-faq-item">
          <button class="lw-faq-q">Should I recast my mortgage or refinance?</button>
          <div class="lw-faq-a">
            <p>Recast if: you have a lump sum, your current rate is lower than or similar to today's rates, and you want lower payments with minimal fees ($150-500). Refinance if: today's rates are significantly lower than your current rate (typically 0.75%+ difference), you want to change your loan term, or you need to access equity. Use this calculator to compare total costs for your specific situation.</p>
          </div>
        </div>

        <div class="lw-faq-item">
          <button class="lw-faq-q">How much does a mortgage recast cost?</button>
          <div class="lw-faq-a">
            <p>A mortgage recast typically costs between $150 and $500 as a one-time administrative fee charged by your lender. This is significantly less than refinancing closing costs, which typically range from $3,000 to $15,000 (2-5% of the loan amount). Most lenders require a minimum lump sum payment of $5,000-$10,000 to qualify for a recast.</p>
          </div>
        </div>

        <div class="lw-faq-item">
          <button class="lw-faq-q">What is the minimum amount to recast a mortgage?</button>
          <div class="lw-faq-a">
            <p>Most lenders require a minimum lump sum payment of $5,000 to $10,000 to process a mortgage recast. Some lenders may require $10,000 or more. Check with your specific lender as requirements vary. Note that not all loan types are eligible for recasting‚ÄîFHA and VA loans typically cannot be recast.</p>
          </div>
        </div>

        <div class="lw-faq-item">
          <button class="lw-faq-q">When is refinancing better than recasting?</button>
          <div class="lw-faq-a">
            <p>Refinancing is typically better when: 1) Current rates are at least 0.75-1% lower than your existing rate, 2) You plan to stay in your home long enough to recoup closing costs (usually 2-5 years), 3) You want to shorten your loan term (e.g., 30-year to 15-year), or 4) You need to access home equity through a cash-out refinance.</p>
          </div>
        </div>

        <div class="lw-faq-item">
          <button class="lw-faq-q">Can I recast after refinancing?</button>
          <div class="lw-faq-a">
            <p>Yes, you can typically recast a mortgage after refinancing, as long as your new loan is a conventional loan that allows recasting. However, most lenders require you to wait a certain period (often 3-6 months) after closing before you can recast. FHA and VA loans generally cannot be recast regardless of when you refinanced.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Related Tools -->
    <section class="lw-related">
      <h2>Related Mortgage Tools</h2>
      <div class="lw-related-grid">
        <a href="/refinance-break-even/" class="lw-related-link">
          <span class="dot"></span>
          Refinance Break-Even Calculator
        </a>
        <a href="/extra-mortgage-payment/" class="lw-related-link">
          <span class="dot"></span>
          Extra Payment Calculator
        </a>
        <a href="/mortgage-calculator/" class="lw-related-link">
          <span class="dot"></span>
          Mortgage Calculator
        </a>
      </div>
    </section>

    <!-- Disclaimer -->
    <div class="lw-disclaimer">
      This calculator provides estimates for educational purposes only. Actual payments, savings, and costs may vary based on your lender's terms and policies. Not all mortgages are eligible for recasting. Consult with your lender or a mortgage professional before making decisions.
    </div>
  </main>

  <!-- Footer -->
  <footer class="lw-footer">
    <p>¬© 2025 PocketWise Financial Tools. <a href="/">Explore All Calculators</a></p>
  </footer>

  <style>
    /* Comparison Grid */
    .comparison-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-bottom: 24px;
    }
    @media (max-width: 768px) {
      .comparison-grid {
        grid-template-columns: 1fr;
      }
    }

    /* Comparison Cards */
    .comparison-card {
      background: var(--lw-card);
      border-radius: var(--lw-radius-lg);
      overflow: hidden;
      box-shadow: var(--lw-shadow);
      border: 2px solid var(--lw-border-light);
      transition: all var(--lw-transition);
    }
    .comparison-card.winner {
      border-color: var(--lw-emerald);
      box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.15), var(--lw-shadow-lg);
    }
    .comparison-card.winner .comparison-header {
      background: linear-gradient(135deg, var(--lw-emerald) 0%, var(--lw-teal) 100%);
    }
    .comparison-card.winner .comparison-header h3,
    .comparison-card.winner .comparison-header .comparison-tag {
      color: white;
    }
    .comparison-card.winner .comparison-icon {
      background: rgba(255,255,255,0.2);
    }

    .comparison-header {
      padding: 20px 24px;
      background: var(--lw-slate-50);
      display: flex;
      align-items: center;
      gap: 12px;
      border-bottom: 1px solid var(--lw-border-light);
    }
    .comparison-header h3 {
      font-family: 'Plus Jakarta Sans', sans-serif;
      font-size: 18px;
      font-weight: 700;
      color: var(--lw-navy);
      margin: 0;
      flex: 1;
    }
    .comparison-icon {
      width: 40px;
      height: 40px;
      border-radius: var(--lw-radius);
      background: var(--lw-sky-100);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }
    .comparison-card.recast .comparison-icon {
      background: var(--lw-emerald-50);
    }
    .comparison-card.refinance .comparison-icon {
      background: var(--lw-sky-100);
    }
    .comparison-tag {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: var(--lw-text-muted);
      background: var(--lw-card);
      padding: 4px 10px;
      border-radius: var(--lw-radius-full);
    }

    .comparison-main-value {
      padding: 28px 24px;
      text-align: center;
      background: var(--lw-card);
    }
    .comparison-label {
      font-size: 12px;
      color: var(--lw-text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 600;
      margin-bottom: 4px;
    }
    .comparison-amount {
      font-family: 'Plus Jakarta Sans', sans-serif;
      font-size: 36px;
      font-weight: 800;
      color: var(--lw-navy);
      letter-spacing: -1px;
    }
    .comparison-savings {
      font-size: 14px;
      color: var(--lw-emerald);
      font-weight: 600;
      margin-top: 4px;
    }

    .comparison-details {
      padding: 0 24px 24px;
      background: var(--lw-card);
    }
    .comparison-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid var(--lw-border-light);
      font-size: 14px;
      color: var(--lw-text-secondary);
    }
    .comparison-row:last-child {
      border-bottom: none;
    }
    .comparison-row.highlight {
      background: var(--lw-slate-50);
      margin: 12px -24px 0;
      padding: 14px 24px;
      border-radius: 0 0 var(--lw-radius) var(--lw-radius);
      border-bottom: none;
      font-weight: 600;
      color: var(--lw-navy);
    }
    .comparison-value {
      font-family: 'JetBrains Mono', monospace;
      font-weight: 600;
      color: var(--lw-navy);
    }

    /* Savings Summary */
    .savings-summary {
      margin-top: 24px;
      padding: 20px;
      background: var(--lw-emerald-50);
      border-radius: var(--lw-radius);
      text-align: center;
    }
    .savings-summary.negative {
      background: var(--lw-amber-50);
    }
    .savings-summary strong {
      color: var(--lw-emerald-dark);
      font-size: 18px;
    }
    .savings-summary.negative strong {
      color: #B45309;
    }
    .savings-summary p {
      margin: 0;
      color: var(--lw-text-secondary);
      font-size: 15px;
    }

    /* Break-Even Grid */
    .breakeven-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-bottom: 20px;
    }
    @media (max-width: 600px) {
      .breakeven-grid {
        grid-template-columns: 1fr;
      }
    }
    .breakeven-item {
      text-align: center;
      padding: 24px;
      background: var(--lw-slate-50);
      border-radius: var(--lw-radius);
    }
    .breakeven-label {
      font-size: 13px;
      color: var(--lw-text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 600;
      margin-bottom: 8px;
    }
    .breakeven-value {
      font-family: 'Plus Jakarta Sans', sans-serif;
      font-size: 32px;
      font-weight: 800;
      color: var(--lw-navy);
    }
    .breakeven-note {
      font-size: 13px;
      color: var(--lw-text-secondary);
      margin-top: 4px;
    }

    .breakeven-insight {
      padding: 16px 20px;
      background: var(--lw-sky-50);
      border-radius: var(--lw-radius);
      color: var(--lw-sky-dark);
      font-size: 14px;
      line-height: 1.6;
    }

    /* Pros & Cons */
    .pros-cons-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }
    @media (max-width: 768px) {
      .pros-cons-grid {
        grid-template-columns: 1fr;
      }
    }
    .pros-cons-card {
      background: var(--lw-slate-50);
      border-radius: var(--lw-radius);
      padding: 20px;
    }
    .pros-cons-card h4 {
      font-family: 'Plus Jakarta Sans', sans-serif;
      font-size: 16px;
      font-weight: 700;
      color: var(--lw-navy);
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--lw-border);
    }
    .pros-header, .cons-header {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--lw-emerald-dark);
    }
    .cons-header {
      color: var(--lw-rose-dark);
      margin-top: 16px;
    }
    .pros ul, .cons ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .pros li, .cons li {
      font-size: 13px;
      color: var(--lw-text-secondary);
      padding: 4px 0;
      padding-left: 16px;
      position: relative;
    }
    .pros li::before {
      content: '‚Ä¢';
      position: absolute;
      left: 0;
      color: var(--lw-emerald);
      font-weight: bold;
    }
    .cons li::before {
      content: '‚Ä¢';
      position: absolute;
      left: 0;
      color: var(--lw-rose);
      font-weight: bold;
    }

    /* Winner badge animation */
    @keyframes pulse-winner {
      0%, 100% { box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.15), var(--lw-shadow-lg); }
      50% { box-shadow: 0 0 0 6px rgba(16, 185, 129, 0.1), var(--lw-shadow-lg); }
    }
    .comparison-card.winner {
      animation: pulse-winner 2s ease-in-out infinite;
    }
  </style>

  <script>
    // Utility functions
    function parseNumber(str) {
      if (!str) return 0;
      return parseFloat(str.replace(/[^0-9.-]/g, '')) || 0;
    }

    function formatCurrency(num) {
      return new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency: 'USD',
        minimumFractionDigits: 0,
        maximumFractionDigits: 0
      }).format(num);
    }

    function formatCurrencyPrecise(num) {
      return new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency: 'USD',
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      }).format(num);
    }

    function formatInput(input) {
      const value = parseNumber(input.value);
      if (value > 0) {
        input.value = value.toLocaleString('en-US');
      }
    }

    // Calculate monthly payment
    function calculateMonthlyPayment(principal, annualRate, months) {
      if (principal <= 0 || months <= 0) return 0;
      if (annualRate === 0) return principal / months;
      const monthlyRate = annualRate / 100 / 12;
      return principal * (monthlyRate * Math.pow(1 + monthlyRate, months)) / 
             (Math.pow(1 + monthlyRate, months) - 1);
    }

    // Calculate total interest over term
    function calculateTotalInterest(principal, annualRate, months) {
      const payment = calculateMonthlyPayment(principal, annualRate, months);
      return (payment * months) - principal;
    }

    // Main calculation
    function calculate() {
      const currentBalance = parseNumber(document.getElementById('currentBalance').value);
      const currentRate = parseNumber(document.getElementById('currentRate').value);
      const currentPayment = parseNumber(document.getElementById('currentPayment').value);
      const remainingTerm = parseNumber(document.getElementById('remainingTerm').value);
      const lumpSum = parseNumber(document.getElementById('lumpSum').value);
      const recastFee = parseNumber(document.getElementById('recastFee').value) || 250;
      const refiClosingCosts = parseNumber(document.getElementById('refiClosingCosts').value);
      const newRefiRate = parseNumber(document.getElementById('newRefiRate').value);

      // Validate inputs
      if (currentBalance <= 0 || currentRate <= 0 || remainingTerm <= 0 || lumpSum <= 0 || newRefiRate <= 0) {
        document.getElementById('resultsSection').classList.add('lw-hidden');
        return;
      }

      // Show results
      document.getElementById('resultsSection').classList.remove('lw-hidden');

      // Calculate RECAST scenario
      const recastNewBalance = currentBalance - lumpSum;
      const recastPayment = calculateMonthlyPayment(recastNewBalance, currentRate, remainingTerm);
      const recastTotalInterest = calculateTotalInterest(recastNewBalance, currentRate, remainingTerm);
      const recastTotalCost = recastNewBalance + recastTotalInterest + recastFee + lumpSum;
      const recastMonthlySavings = currentPayment - recastPayment;

      // Calculate REFINANCE scenario
      // Assuming they apply lump sum to principal at refinance
      const refiNewBalance = currentBalance - lumpSum;
      const refiPayment = calculateMonthlyPayment(refiNewBalance, newRefiRate, remainingTerm);
      const refiTotalInterest = calculateTotalInterest(refiNewBalance, newRefiRate, remainingTerm);
      const refiTotalCost = refiNewBalance + refiTotalInterest + refiClosingCosts + lumpSum;
      const refiMonthlySavings = currentPayment - refiPayment;

      // Calculate CURRENT scenario (no change, for comparison)
      const currentTotalInterest = calculateTotalInterest(currentBalance, currentRate, remainingTerm);
      const currentTotalCost = currentBalance + currentTotalInterest;

      // Determine winner
      const recastWins = recastTotalCost <= refiTotalCost;
      const savingsVsRecast = refiTotalCost - recastTotalCost;
      const savingsVsCurrent = Math.min(currentTotalCost - recastTotalCost, currentTotalCost - refiTotalCost);

      // Update comparison cards
      document.getElementById('recastPayment').textContent = formatCurrencyPrecise(recastPayment);
      document.getElementById('recastMonthlySavings').textContent = recastMonthlySavings > 0 
        ? `Saves ${formatCurrencyPrecise(recastMonthlySavings)}/month` 
        : `${formatCurrencyPrecise(Math.abs(recastMonthlySavings))}/month more`;
      document.getElementById('recastMonthlySavings').style.color = recastMonthlySavings > 0 ? 'var(--lw-emerald)' : 'var(--lw-rose)';
      document.getElementById('recastUpfront').textContent = formatCurrency(recastFee);
      document.getElementById('recastRate').textContent = currentRate.toFixed(2) + '%';
      document.getElementById('recastBalance').textContent = formatCurrency(recastNewBalance);
      document.getElementById('recastTotalInterest').textContent = formatCurrency(recastTotalInterest);
      document.getElementById('recastTotalCost').textContent = formatCurrency(recastTotalCost);

      document.getElementById('refiPayment').textContent = formatCurrencyPrecise(refiPayment);
      document.getElementById('refiMonthlySavings').textContent = refiMonthlySavings > 0 
        ? `Saves ${formatCurrencyPrecise(refiMonthlySavings)}/month` 
        : `${formatCurrencyPrecise(Math.abs(refiMonthlySavings))}/month more`;
      document.getElementById('refiMonthlySavings').style.color = refiMonthlySavings > 0 ? 'var(--lw-emerald)' : 'var(--lw-rose)';
      document.getElementById('refiUpfront').textContent = formatCurrency(refiClosingCosts);
      document.getElementById('refiRate').textContent = newRefiRate.toFixed(2) + '%';
      document.getElementById('refiBalance').textContent = formatCurrency(refiNewBalance);
      document.getElementById('refiTotalInterest').textContent = formatCurrency(refiTotalInterest);
      document.getElementById('refiTotalCost').textContent = formatCurrency(refiTotalCost);

      // Update winner styling
      document.getElementById('recastCard').classList.toggle('winner', recastWins);
      document.getElementById('refinanceCard').classList.toggle('winner', !recastWins);

      // Update recommendation
      const recommendation = document.getElementById('recommendation');
      const recommendationSub = document.getElementById('recommendationSub');
      const decisionHero = document.getElementById('decisionHero');
      
      if (recastWins) {
        recommendation.textContent = 'üîÑ Recast Your Mortgage';
        recommendationSub.textContent = `Saves ${formatCurrency(Math.abs(savingsVsRecast))} more than refinancing over your remaining term`;
        decisionHero.style.background = 'linear-gradient(135deg, #059669 0%, #14B8A6 100%)';
      } else {
        recommendation.textContent = '‚ú® Refinance Your Mortgage';
        recommendationSub.textContent = `Saves ${formatCurrency(Math.abs(savingsVsRecast))} more than recasting over your remaining term`;
        decisionHero.style.background = 'linear-gradient(135deg, #0284C7 0%, #0EA5E9 100%)';
      }

      // Update bar chart
      const maxCost = Math.max(currentTotalCost, recastTotalCost, refiTotalCost);
      
      document.getElementById('currentCostAmount').textContent = formatCurrency(currentTotalCost);
      document.getElementById('recastCostAmount').textContent = formatCurrency(recastTotalCost);
      document.getElementById('refiCostAmount').textContent = formatCurrency(refiTotalCost);

      setTimeout(() => {
        document.getElementById('currentBar').style.width = `${(currentTotalCost / maxCost) * 100}%`;
        document.getElementById('recastBar').style.width = `${(recastTotalCost / maxCost) * 100}%`;
        document.getElementById('refiBar').style.width = `${(refiTotalCost / maxCost) * 100}%`;
      }, 100);

      // Savings summary
      const savingsSummary = document.getElementById('savingsSummary');
      const bestSavings = Math.max(currentTotalCost - recastTotalCost, currentTotalCost - refiTotalCost);
      const bestOption = (currentTotalCost - recastTotalCost) >= (currentTotalCost - refiTotalCost) ? 'recast' : 'refinance';
      
      if (bestSavings > 0) {
        savingsSummary.className = 'savings-summary';
        savingsSummary.innerHTML = `<p><strong>You'll save ${formatCurrency(bestSavings)}</strong> over your remaining term by choosing to ${bestOption} vs. keeping your current mortgage unchanged.</p>`;
      } else {
        savingsSummary.className = 'savings-summary negative';
        savingsSummary.innerHTML = `<p><strong>Keeping your current mortgage</strong> may be the best option. Both recast and refinance result in higher total costs.</p>`;
      }

      // Break-even analysis
      const recastBreakeven = recastMonthlySavings > 0 ? Math.ceil(recastFee / recastMonthlySavings) : null;
      const refiBreakeven = refiMonthlySavings > 0 ? Math.ceil(refiClosingCosts / refiMonthlySavings) : null;

      document.getElementById('recastBreakeven').textContent = recastBreakeven !== null ? recastBreakeven : 'N/A';
      document.getElementById('recastBreakevenNote').textContent = recastBreakeven !== null 
        ? `months to recoup ${formatCurrency(recastFee)} fee` 
        : 'Payment increases, no break-even';

      document.getElementById('refiBreakeven').textContent = refiBreakeven !== null ? refiBreakeven : 'N/A';
      document.getElementById('refiBreakevenNote').textContent = refiBreakeven !== null 
        ? `months to recoup ${formatCurrency(refiClosingCosts)} costs` 
        : 'Payment increases, no break-even';

      // Break-even insight
      const breakevenInsight = document.getElementById('breakevenInsight');
      if (recastBreakeven !== null && refiBreakeven !== null) {
        if (recastBreakeven < refiBreakeven) {
          breakevenInsight.innerHTML = `<strong>‚ö° Recast breaks even ${refiBreakeven - recastBreakeven} months faster.</strong> You'll start saving sooner with a recast. Refinance takes longer to pay off its higher upfront costs.`;
        } else if (refiBreakeven < recastBreakeven) {
          breakevenInsight.innerHTML = `<strong>‚ö° Refinance breaks even ${recastBreakeven - refiBreakeven} months faster.</strong> The larger monthly savings from the lower rate overcome the higher closing costs quickly.`;
        } else {
          breakevenInsight.innerHTML = `<strong>‚ö° Both options break even in about the same time.</strong> Your decision should focus on total savings over your remaining term.`;
        }
      } else if (recastBreakeven !== null) {
        breakevenInsight.innerHTML = `<strong>‚ö° Only recast produces monthly savings.</strong> Refinance at ${newRefiRate}% doesn't lower your payment enough‚Äîconsider waiting for better rates to refinance.`;
      } else if (refiBreakeven !== null) {
        breakevenInsight.innerHTML = `<strong>‚ö° Only refinance produces monthly savings.</strong> Your current rate may already be competitive, but the new lower rate still saves money.`;
      } else {
        breakevenInsight.innerHTML = `<strong>‚ö†Ô∏è Neither option lowers your monthly payment.</strong> You may want to reconsider these options or wait for better conditions.`;
      }

      // Update explanation
      updateExplanation(
        currentBalance, currentRate, currentPayment, remainingTerm,
        lumpSum, recastFee, refiClosingCosts, newRefiRate,
        recastPayment, refiPayment, recastTotalCost, refiTotalCost,
        recastMonthlySavings, refiMonthlySavings, recastWins
      );
    }

    function updateExplanation(
      currentBalance, currentRate, currentPayment, remainingTerm,
      lumpSum, recastFee, refiClosingCosts, newRefiRate,
      recastPayment, refiPayment, recastTotalCost, refiTotalCost,
      recastMonthlySavings, refiMonthlySavings, recastWins
    ) {
      const container = document.getElementById('explanationText');
      const rateDiff = currentRate - newRefiRate;
      const costDiff = Math.abs(recastTotalCost - refiTotalCost);

      let html = `<p><strong>Here's your situation:</strong> You have ${formatCurrency(lumpSum)} available and want to lower your ${formatCurrencyPrecise(currentPayment)}/month payment on a ${formatCurrency(currentBalance)} balance at ${currentRate}%.</p>`;

      html += `<p><strong>Option 1 ‚Äî Recast:</strong> Apply your ${formatCurrency(lumpSum)} lump sum to principal, pay a ${formatCurrency(recastFee)} fee, and keep your ${currentRate}% rate. New payment: <strong>${formatCurrencyPrecise(recastPayment)}</strong> (${recastMonthlySavings > 0 ? 'saving' : 'costing'} ${formatCurrencyPrecise(Math.abs(recastMonthlySavings))}/month).</p>`;

      html += `<p><strong>Option 2 ‚Äî Refinance:</strong> Get a new loan at ${newRefiRate}% with ${formatCurrency(refiClosingCosts)} in closing costs, applying your ${formatCurrency(lumpSum)} to the new balance. New payment: <strong>${formatCurrencyPrecise(refiPayment)}</strong> (${refiMonthlySavings > 0 ? 'saving' : 'costing'} ${formatCurrencyPrecise(Math.abs(refiMonthlySavings))}/month).</p>`;

      if (recastWins) {
        html += `<p><strong>The verdict:</strong> Despite refinance offering a ${rateDiff > 0 ? 'lower' : 'higher'} rate, <span style="color: var(--lw-emerald-dark); font-weight: 600;">recasting saves you ${formatCurrency(costDiff)} more</span> over your remaining ${remainingTerm} months. `;
        
        if (rateDiff > 0 && rateDiff < 1) {
          html += `The rate difference of ${rateDiff.toFixed(2)}% isn't large enough to overcome the ${formatCurrency(refiClosingCosts)} closing costs. Recast is the smarter choice when rates haven't dropped significantly.`;
        } else if (refiClosingCosts > 5000) {
          html += `The high closing costs of ${formatCurrency(refiClosingCosts)} eat into any rate savings. Recast's minimal ${formatCurrency(recastFee)} fee makes it the clear winner here.`;
        } else {
          html += `Your current rate of ${currentRate}% is competitive enough that refinancing doesn't provide meaningful additional savings.`;
        }
        html += `</p>`;
      } else {
        html += `<p><strong>The verdict:</strong> <span style="color: var(--lw-sky-dark); font-weight: 600;">Refinancing saves you ${formatCurrency(costDiff)} more</span> over your remaining ${remainingTerm} months. `;
        
        if (rateDiff >= 1) {
          html += `The ${rateDiff.toFixed(2)}% rate drop is significant enough to overcome the ${formatCurrency(refiClosingCosts)} closing costs, delivering substantial long-term savings.`;
        } else {
          html += `Even though closing costs are higher, the lower monthly payment adds up to more savings over time.`;
        }
        html += `</p>`;
      }

      // Rate environment context
      if (currentRate > newRefiRate) {
        html += `<p style="background: var(--lw-sky-50); padding: 12px 16px; border-radius: var(--lw-radius); border-left: 3px solid var(--lw-sky);"><strong>üí° Rate insight:</strong> Your current rate (${currentRate}%) is higher than available rates (${newRefiRate}%). If you plan to stay in your home long-term, refinancing could be worth the upfront costs.</p>`;
      } else {
        html += `<p style="background: var(--lw-emerald-50); padding: 12px 16px; border-radius: var(--lw-radius); border-left: 3px solid var(--lw-emerald);"><strong>üí° Rate insight:</strong> Your current rate (${currentRate}%) is ${currentRate < newRefiRate ? 'lower than' : 'similar to'} today's rates (${newRefiRate}%). Recast lets you keep your great rate while still lowering your payment!</p>`;
      }

      container.innerHTML = html;
    }

    // Input formatting and events
    const currencyInputs = ['currentBalance', 'currentPayment', 'lumpSum', 'recastFee', 'refiClosingCosts'];
    const allInputs = ['currentBalance', 'currentRate', 'currentPayment', 'remainingTerm', 'lumpSum', 'recastFee', 'refiClosingCosts', 'newRefiRate'];
    
    allInputs.forEach(id => {
      const input = document.getElementById(id);
      
      input.addEventListener('input', () => {
        calculate();
      });

      if (currencyInputs.includes(id)) {
        input.addEventListener('blur', () => {
          formatInput(input);
        });
      }
    });

    // FAQ accordion
    document.querySelectorAll('.lw-faq-q').forEach(btn => {
      btn.addEventListener('click', () => {
        const item = btn.parentElement;
        const wasOpen = item.classList.contains('open');
        
        // Close all
        document.querySelectorAll('.lw-faq-item').forEach(i => i.classList.remove('open'));
        
        // Toggle current
        if (!wasOpen) item.classList.add('open');
      });
    });

    // Mobile menu
    function toggleMobileMenu() {
      document.getElementById('mobileMenu').classList.toggle('open');
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', calculate);
  </script>
</body>
</html>
